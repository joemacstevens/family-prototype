import{r as t,c as s,h as e,g as i}from"./p-5f633ccc.js";import"./p-74149bb1.js";import{h as o}from"./p-6675dcbc.js";import{P as r}from"./p-f02f0fad.js";import{a as h,c as n,b as l}from"./p-71c9ed78.js";var a=function(t,s,e,i){var o,r=arguments.length,h=r<3?s:null===i?i=Object.getOwnPropertyDescriptor(s,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)h=Reflect.decorate(t,s,e,i);else for(var n=t.length-1;n>=0;n--)(o=t[n])&&(h=(r<3?o(h):r>3?o(s,e,h):o(s,e))||h);return r>3&&h&&Object.defineProperty(s,e,h),h};const c=class{constructor(e){t(this,e),this.level=1,this.noArrow=!1,this.overlap=0,this.opened=!1,this.focusAttribute="focusable",this.triggerTabIndex="0",this.arrowPointer=!0,this.trigger="click",this.enableOpenChangedEvent=!1,this.spaces={vertical:"bottom",horizontal:"center"},this.screenGrid={columns:3,rows:3},this.triggerSelector=".flyout-trigger",this.focusFirstChild=!1,this.keyPressCases=(t,s,e)=>({Enter:()=>{s&&(t.stopPropagation(),this.focusFirstChild=!0,this.opened?this.closeFlyout("ENTER_KEY"):this.openFlyout("ENTER_KEY"))},ArrowDown:()=>{s&&(t.preventDefault(),this.focusFirstChild=!0,this.openFlyout("ARROW_DOWN")),-1!==e&&(t.preventDefault(),this.focusNextItem(e))},ArrowUp:()=>{-1!==e&&(t.preventDefault(),this.focusPrevItem(e))},Tab:()=>{-1!==e&&(t.preventDefault(),this.focusNextItem(e))},Escape:()=>{this.opened&&t.stopPropagation(),this.closeFlyout("ESC_KEY")}}[t.key]),this.spacesValidity=t=>({vertical:t.vertical?t.vertical:this.spaces.vertical,horizontal:t.horizontal?t.horizontal:this.spaces.horizontal}),this.flyoutOpenChanged=s(this,"flyoutOpenChanged",7)}componentWillLoad(){this.handleClick=this.handleClick.bind(this),this.handleKeyPress=this.handleKeyPress.bind(this),this.handleMouseEnter=this.handleMouseEnter.bind(this),this.handleMouseLeave=this.handleMouseLeave.bind(this),this.focusableElementsSelector=`button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"]), [${this.focusAttribute}]`,this.focusableElements=[],this.slotElement=this.host.querySelector("[slot=trigger]"),this.placement&&(this.spaces=this.updateSpaces(this.placement))}emitOpenChanged(){this.enableOpenChangedEvent&&this.flyoutOpenChanged.emit(this.opened),this.slotElement&&Array.from(this.slotElement.children).forEach(t=>t.classList.toggle("trigger-active"))}searchFocusableInComponent(t,s){return t.shadowRoot.querySelector(s)||t}queryShadowRoot(t,s){return t.shadowRoot.querySelector(s)}getElementsFromSlot(){const t=this.host.shadowRoot.querySelector(".flyout-content slot");return t?t.assignedElements():[]}getAllFocusableItems(){const t=this.getElementsFromSlot();let s=[];return t.forEach(t=>{const e=Array.from(t.querySelectorAll(this.focusableElementsSelector)).filter(t=>t.offsetWidth);s=[...s,...e]}),s}setFocusToChild(){let t;this.focusableElements=this.getAllFocusableItems(),t=this.focusableElements[0],t&&(t.classList.contains("hydrated")&&(t=this.searchFocusableInComponent(t,this.focusableElementsSelector)),t.focus())}closeFlyout(t,s=!1){if(this.opened=!1,this.close.emit(t),s)return;let e;e="-1"===this.triggerTabIndex?this.host.querySelector("[slot=trigger]").querySelector(this.focusableElementsSelector):this.queryShadowRoot(this.host,this.triggerSelector),e&&e.focus()}openFlyout(t){this.opened=!0,this.open.emit(t)}handleClick(t){const{trigger:s,opened:e}=this;"none"===s||"click"!==s&&1===t.detail||(0===t.detail&&(this.focusFirstChild=!0),t.preventDefault(),e?this.closeFlyout("MOUSE_CLICK"):this.openFlyout("MOUSE_CLICK"))}handleMouseEnter(){"hover"!==this.trigger||this.opened||this.openFlyout("MOUSE_ENTER")}handleMouseLeave(){"hover"===this.trigger&&this.opened&&this.closeFlyout("MOUSE_LEAVE",!0)}focusPrevItem(t){this.focusableElements[t<=0?this.focusableElements.length-1:t-1].focus()}focusNextItem(t){this.focusableElements[t>=this.focusableElements.length-1?0:t+1].focus()}searchForFocusableItem(t){return this.focusableElements.indexOf(t)}handleKeyPress(t){const s=t.path[0],e=this.searchForFocusableItem(s),i=s.classList.contains("flyout-trigger");["Enter","ArrowDown","ArrowUp","Tab","Escape"].includes(t.key)&&"none"!==this.trigger&&this.keyPressCases(t,i,e)()}applyStyles(t,{top:s,right:e,bottom:i,left:o}){const{style:r}=t;s?r.top=s:r.removeProperty("top"),e?r.right=e:r.removeProperty("right"),i?r.bottom=i:r.removeProperty("bottom"),o?r.left=o:r.removeProperty("left")}calculateArrowPointer(t){const{triggerEl:s,flyoutElement:e,applyStyles:i}=this,o=e.querySelector(".arrow-pointer"),r=o.getBoundingClientRect().width;i(o,h(`${t.vertical}-${t.horizontal}`,s,r))}updateSpaces(t){return{top:{vertical:"bottom",horizontal:"center"},bottom:{vertical:"top",horizontal:"center"},left:{vertical:"middle",horizontal:"right"},right:{vertical:"middle",horizontal:"left"}}[t]}updatePosition(){const{opened:t,triggerEl:s,flyoutElement:e,screenGrid:i,level:r,overlap:h,noArrow:a,arrowPointer:c,spacesValidity:u}=this;if(!t||!s||!e)return;let p;this.placement&&(p=this.updateSpaces(this.placement));const d=1===r?n(s,e,i,p):l(s,e,h,p),{placement:f,spaces:g}=d;if(e.style.top=o(f.top),e.style.left=o(f.left),!a||c){const t=e.querySelector(".flyout-content"),s=`flyout-content-${this.spaces.vertical}-${this.spaces.horizontal}`,i=u(g),o=`flyout-content-${i.vertical}-${i.horizontal}`;s!==o&&(t.classList.remove(s),t.classList.add(o)),this.calculateArrowPointer(i),this.spaces=i}requestAnimationFrame(this.updatePosition.bind(this))}componentDidLoad(){document.addEventListener("click",t=>{const{host:s,opened:e,trigger:i}=this;let o=[];o=t.composedPath(),e&&"none"!==i&&!o.includes(s)&&this.closeFlyout("OUTSIDE_CLICK")}),this.triggerEl=this.queryShadowRoot(this.host,".flyout-trigger"),this.componentDidUpdate()}componentDidUpdate(){const{host:t,opened:s}=this;this.flyoutElement=this.queryShadowRoot(t,".flyout-content-wrapper"),s&&(this.focusFirstChild&&(this.focusFirstChild=!1,this.setFocusToChild()),this.updatePosition())}render(){const{arrowPointer:t,noArrow:s,spaces:i,opened:o,trigger:r,triggerTabIndex:h,handleClick:n,handleMouseEnter:l,handleMouseLeave:a}=this,c={"flyout-content-wrapper":!0,"no-arrow":!t||!!s},u={"flyout-content":!0,[`flyout-content-${i.vertical}-${i.horizontal}`]:!0};return e("div",{class:"flyout",onMouseEnter:l,onMouseLeave:a},e("div",{class:{"flyout-trigger":!0,"flyout-trigger-none":"none"===r},onClick:n,tabindex:h},e("slot",{name:"trigger"})),o?e("div",{class:c},e("div",{class:u},e("span",{class:"arrow-mask"},e("span",{class:"arrow-pointer"})),e("div",{class:"flyout-content-slot-wrapper"},e("slot",null)))):e("div",null))}get host(){return i(this)}static get watchers(){return{opened:["emitOpenChanged"]}}static get style(){return":host{display:inline-block;max-width:var(--flyout-max-width,70%)}.flyout{position:relative;font-family:var(--flyout-font-family);color:var(--flyout-text-color,var(--color-text-primary,var(--text-primary-color,var(--text-color,#1c1c1c))))}.flyout-trigger{cursor:pointer}.flyout-trigger-none{cursor:auto}.flyout-content{position:relative;background:var(--flyout-background,#fff);border-color:var(--flyout-background,#fff);-webkit-box-shadow:var(--flyout-box-shadow,var(--flyout-shadow,2px 4px 8px 0) var(--flyout-shadow-color,rgba(28,28,28,.5)));box-shadow:var(--flyout-box-shadow,var(--flyout-shadow,2px 4px 8px 0) var(--flyout-shadow-color,rgba(28,28,28,.5)));min-height:var(--flyout-min-height,200px);min-width:var(--flyout-min-width,150px);display:-ms-flexbox;display:flex}.flyout-content-wrapper{position:fixed;z-index:var(--flyout-z-index,1000);top:100%;padding:calc(var(--flyout-distance, var(--spacing-xxs, 6px)) + var(--flyout-arrow-size, 8px));white-space:normal;word-break:break-word}.flyout-content-wrapper .arrow-mask{display:block;position:absolute;height:calc(var(--flyout-arrow-size, 8px) + var(--spacing-xxs, 6px));width:calc(var(--flyout-arrow-size, 8px) + var(--spacing-xxs, 6px))}.flyout-content-wrapper .arrow-mask .arrow-pointer{position:absolute;left:auto;top:auto;width:calc(var(--flyout-arrow-size, 8px) * 1.41);height:calc(var(--flyout-arrow-size, 8px) * 1.41);background:var(--flyout-background,#fff);-webkit-box-shadow:var(--flyout-shadow,2px 4px 8px 0) var(--flyout-shadow-color,rgba(28,28,28,.5));box-shadow:var(--flyout-shadow,2px 4px 8px 0) var(--flyout-shadow-color,rgba(28,28,28,.5));-webkit-transform:rotate(45deg);transform:rotate(45deg)}.flyout-content-wrapper.no-arrow{padding:var(--flyout-distance,var(--spacing-xxs,6px))}.flyout-content-wrapper.no-arrow .arrow-mask,.flyout-content-wrapper.no-arrow .arrow-pointer{display:none}.flyout-content-slot-wrapper{padding:var(--flyout-padding,var(--spacing-xxs,6px));background:var(--flyout-background,#fff);position:relative;-ms-flex-item-align:stretch;align-self:stretch;width:100%}.flyout-content-left-top .arrow-mask{right:100%;top:0;height:100%}.flyout-content-left-top .arrow-mask .arrow-pointer{right:calc(-1 * calc(var(--flyout-arrow-size, 8px) * 1.41)/ 2);top:unset}.flyout-content-left-bottom .arrow-mask{right:100%;bottom:0;height:100%}.flyout-content-left-bottom .arrow-mask .arrow-pointer{right:calc(-1 * calc(var(--flyout-arrow-size, 8px) * 1.41)/ 2);bottom:unset}.flyout-content-right-top .arrow-mask{left:100%;top:0;height:100%}.flyout-content-right-top .arrow-mask .arrow-pointer{left:calc(-1 * calc(var(--flyout-arrow-size, 8px) * 1.41)/ 2);top:unset}.flyout-content-right-bottom .arrow-mask{left:100%;bottom:0;height:100%}.flyout-content-right-bottom .arrow-mask .arrow-pointer{left:calc(-1 * calc(var(--flyout-arrow-size, 8px) * 1.41)/ 2);bottom:unset}.flyout-content-top-left .arrow-mask{bottom:100%;left:0;width:100%}.flyout-content-top-left .arrow-mask .arrow-pointer{bottom:calc(-1 * calc(var(--flyout-arrow-size, 8px) * 1.41)/ 2);left:var(--flyout-arrow-size,8px)}.flyout-content-top-center .arrow-mask{bottom:100%;left:0;width:100%}.flyout-content-top-center .arrow-mask .arrow-pointer{bottom:calc(-1 * calc(var(--flyout-arrow-size, 8px) * 1.41)/ 2);left:calc(50% - calc(var(--flyout-arrow-size, 8px) * 1.41)/ 2)}.flyout-content-top-right .arrow-mask{bottom:100%;right:0;width:100%}.flyout-content-top-right .arrow-mask .arrow-pointer{bottom:calc(-1 * calc(var(--flyout-arrow-size, 8px) * 1.41)/ 2);right:var(--flyout-arrow-size,8px)}.flyout-content-middle-left .arrow-mask{top:100%;right:0;height:100%}.flyout-content-middle-left .arrow-mask .arrow-pointer{top:calc(-1 * calc(var(--flyout-arrow-size, 8px) * 1.41)/ 2);right:100%}.flyout-content-middle-right .arrow-mask{top:100%;left:0;height:100%}.flyout-content-middle-right .arrow-mask .arrow-pointer{top:calc(-1 * calc(var(--flyout-arrow-size, 8px) * 1.41)/ 2);left:100%}.flyout-content-bottom-left .arrow-mask{top:100%;left:0;width:100%}.flyout-content-bottom-left .arrow-mask .arrow-pointer{top:calc(-1 * calc(var(--flyout-arrow-size, 8px) * 1.41)/ 2);left:var(--flyout-arrow-size,8px)}.flyout-content-bottom-center .arrow-mask{top:100%;left:0;width:100%}.flyout-content-bottom-center .arrow-mask .arrow-pointer{top:calc(-1 * calc(var(--flyout-arrow-size, 8px) * 1.41)/ 2);left:calc(50% - calc(var(--flyout-arrow-size, 8px) * 1.41)/ 2)}.flyout-content-bottom-right .arrow-mask{top:100%;right:0;width:100%}.flyout-content-bottom-right .arrow-mask .arrow-pointer{top:calc(-1 * calc(var(--flyout-arrow-size, 8px) * 1.41)/ 2);right:var(--flyout-arrow-size,8px)}"}};a([r()],c.prototype,"open",void 0),a([r()],c.prototype,"close",void 0);export{c as wf_flyout};