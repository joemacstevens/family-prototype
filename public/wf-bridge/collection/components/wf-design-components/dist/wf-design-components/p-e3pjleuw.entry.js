import{r as t,c as e,h as i,g as s}from"./p-5f633ccc.js";const n=class{constructor(i){t(this,i),this.opened=!1,this.items=[],this.itemsLimit=9,this.extraItemsLabel="More items...",this.noArrow=!1,this.overlap=0,this.trigger="click",this.parsedItems=[],this.mappedItems=[],this.wfSelect=e(this,"wfSelect",7)}componentWillLoad(){["left","right"].includes(this.subPlacement)||(this.subPlacement=void 0),this.handleNewItems()}handleOpenChanged(t){this.opened=t.detail,t.stopPropagation()}handleNewItems(){this.parsedItems=Array.isArray(this.items)?this.items:JSON.parse(this.items),this.mappedItems=this.parsedItems?this.parsedItems.map(t=>({title:t.groupTitle,icon:t.groupIcon,iconSize:t.groupIconSize,iconType:"inverse",iconAlign:t.groupIconAlign,isGroup:!(t.items&&t.items.length<=1),originalItem:t.items&&t.items.length<=1?t.items[0]:t,items:t.items?t.items.map(this.mapActionItem):[]})):[]}mapActionItem(t){return{title:t.menuItemTitle,icon:t.menuItemIcon,iconType:"inverse",iconSize:t.menuItemIconSize,iconAlign:t.menuItemIconAlign,isGroup:!1,originalItem:t}}handleItemClick(t){this.wfSelect.emit(t.originalItem),this.opened=!1,this.host&&this.host.shadowRoot&&this.host.shadowRoot.querySelectorAll("wf-flyout").forEach(t=>t.opened=!1)}renderItem(t,e=!0){return i("button",{class:{"action-menu-item":!0,[`action-menu-item-icon-${t.iconAlign||"right"}`]:!0},onClick:e&&this.handleItemClick.bind(this,t)},!!t.icon&&i("wf-icon",{class:"action-menu-icon",size:t.iconSize||"xs",name:t.icon,type:t.iconType||"inverse"}),i("span",null,t.title))}renderGroup(t){const{renderItem:e,overlap:s,noArrow:n,trigger:r,subPlacement:o}=this;return i("wf-flyout",{class:"action-menu-child-flyout","trigger-tab-index":"-1",level:2,overlap:s,"no-arrow":n,trigger:r,placement:o},i("div",{slot:"trigger"},e(t,!1)),i("div",{class:{"action-menu":!0}},t.items.map(t=>e.call(this,t,!0))))}renderGroupOrItem(t){const{renderGroup:e,renderItem:i}=this;return t.isGroup?e.call(this,t):i.call(this,t,!0)}render(){const{mappedItems:t,renderGroupOrItem:e,overlap:s,trigger:n,placement:r}=this,o=this.host.shadowRoot?this.host.shadowRoot.querySelector(".action-menu-item"):null,h=o?getComputedStyle(o).lineHeight:"0px";return i("wf-flyout",{opened:this.opened,"enable-open-changed-event":!0,overlap:s,trigger:n,placement:r},i("slot",{slot:"trigger",name:"trigger"}),i("div",{class:{"action-menu":!0},style:{maxHeight:`calc(${this.itemsLimit} * ${h})`}},t.map(e,this)))}get host(){return s(this)}static get watchers(){return{items:["handleNewItems"]}}static get style(){return":host{--flyout-min-height:0}.action-menu{padding:var(--action-menu-padding,3px);min-width:var(--action-menu-min-width,200px);overflow-y:auto}.action-menu-item{-ms-flex-align:center;align-items:center;background:transparent;border:0;cursor:var(--action-menu-item-cursor,pointer);display:-ms-flexbox;display:flex;font-family:var(--action-menu-item-font-family);font-size:var(--action-menu-item-font-size,14px);font-weight:var(--action-menu-item-font-weight,500);line-height:var(--action-menu-item-line-height,40px);padding:0 var(--action-menu-item-horizontal-padding,14px);text-align:left;width:100%}.action-menu-item:hover{background-color:var(--action-menu-item-hover-background,#e6e6e6)}.action-menu-item-icon-right{-ms-flex-direction:row-reverse;flex-direction:row-reverse}.action-menu-item span{-ms-flex-positive:1;flex-grow:1}.action-menu-item .action-menu-icon{display:-ms-flexbox;display:flex}.action-menu-item-icon-left .action-menu-icon{margin-right:var(--action-menu-item-icon-margin,8px)}.action-menu-item-icon-right .action-menu-icon{margin-left:var(--action-menu-item-icon-margin,8px)}.action-menu .action-menu-child-flyout{display:block;max-width:100%;width:100%}"}};export{n as wf_action_menu};