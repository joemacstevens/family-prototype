import{r as t,h as e,g as i}from"./p-5f633ccc.js";import{P as s}from"./p-f02f0fad.js";const n=class{constructor(e){t(this,e),this.opened=!1,this.items=[],this.itemsLimit=9,this.extraItemsLabel="More items...",this.noArrow=!1,this.overlap=12,this.trigger="click",this.childTrigger="hover",this.parsedItems=[],this.mappedItems=[]}componentWillLoad(){["left","right"].includes(this.subPlacement)||(this.subPlacement=void 0),this.handleNewItems()}handleOpenChanged(t){this.opened=t.detail,t.stopPropagation()}handleNewItems(){this.parsedItems=Array.isArray(this.items)?this.items:JSON.parse(this.items),this.mappedItems=this.parsedItems?this.parsedItems.map(t=>({title:t.groupTitle,icon:t.groupIcon,iconSize:t.groupIconSize,iconType:"inverse",iconAlign:t.groupIconAlign,isGroup:!(t.items&&t.items.length<=1),originalItem:t.items&&t.items.length<=1?t.items[0]:t,items:t.items?t.items.map(this.mapActionItem):[]})):[]}mapActionItem(t){return{title:t.menuItemTitle,icon:t.menuItemIcon,iconType:"inverse",iconSize:t.menuItemIconSize,iconAlign:t.menuItemIconAlign,isGroup:!1,originalItem:t}}handleItemClick(t){this.select.emit(t.originalItem),this.opened=!1,this.host&&this.host.shadowRoot&&this.host.shadowRoot.querySelectorAll("wf-flyout").forEach(t=>t.opened=!1)}renderItem(t,i=!0){return e("button",{class:{"action-menu-item":!0,[`action-menu-item-icon-${t.iconAlign||"right"}`]:!0},onClick:i&&this.handleItemClick.bind(this,t)},!!t.icon&&e("wf-icon",{class:"action-menu-icon",size:t.iconSize||"xs",name:t.icon,type:t.iconType||"inverse"}),e("span",null,t.title))}renderGroup(t){const{renderItem:i,overlap:s,noArrow:n,subPlacement:r,childTrigger:o}=this;return e("wf-flyout",{class:"action-menu-child-flyout","trigger-tab-index":"-1",level:2,overlap:s,"no-arrow":n,trigger:o,placement:r},e("div",{slot:"trigger"},i(t,!1)),e("div",{class:{"action-menu":!0}},t.items.map(t=>i.call(this,t,!0))))}renderGroupOrItem(t){const{renderGroup:e,renderItem:i}=this;return t.isGroup?e.call(this,t):i.call(this,t,!0)}render(){const{mappedItems:t,renderGroupOrItem:i,overlap:s,trigger:n,placement:r}=this,o=this.host.shadowRoot?this.host.shadowRoot.querySelector(".action-menu-item"):null,c=o?getComputedStyle(o).minHeight:"0px";return e("wf-flyout",{opened:this.opened,"enable-open-changed-event":!0,overlap:s,trigger:n,placement:r},e("slot",{slot:"trigger",name:"trigger"}),e("div",{class:{"action-menu":!0},style:{maxHeight:`calc(${this.itemsLimit} * ${c})`}},t.map(i,this)))}get host(){return i(this)}static get watchers(){return{items:["handleNewItems"]}}static get style(){return":host{--flyout-min-height:0}.action-menu{padding:var(--action-menu-padding,var(--spacing-xxxs,3px));min-width:var(--action-menu-min-width,200px);max-width:var(--action-menu-max-width,300px);overflow-y:auto}.action-menu-item{-ms-flex-align:center;align-items:center;background:transparent;border:0;cursor:var(--action-menu-item-cursor,pointer);min-height:var(--action-menu-item-min-height,48px);display:-ms-flexbox;display:flex;font-family:var(--action-menu-item-font-family);font-size:var(--action-menu-item-font-size);font-weight:var(--action-menu-item-font-weight);line-height:var(--action-menu-item-line-height);mix-blend-mode:var(--action-menu-item-blend-mode,normal);padding:0 var(--action-menu-item-horizontal-padding,var(--spacing-xs,12px));text-align:left;width:100%}.action-menu-item.trigger-active,.action-menu-item:hover{background-color:var(--action-menu-item-hover-background,hsla(0,0%,90.2%,.5))}.action-menu-item:active{background-color:var(--action-menu-item-active-background,hsla(0,0%,90.2%,.3))}.action-menu-item-icon-right{-ms-flex-direction:row-reverse;flex-direction:row-reverse}.action-menu-item span{-ms-flex-positive:1;flex-grow:1}.action-menu-item .action-menu-icon{display:-ms-flexbox;display:flex}.action-menu-item-icon-left .action-menu-icon{margin-right:var(--action-menu-item-icon-margin,8px)}.action-menu-item-icon-right .action-menu-icon{margin-left:var(--action-menu-item-icon-margin,8px)}.action-menu .action-menu-child-flyout{display:block;max-width:100%;width:100%}"}};!function(t,e,i,s){var n,r=arguments.length,o=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,s);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(o=(r<3?n(o):r>3?n(e,i,o):n(e,i))||o);r>3&&o&&Object.defineProperty(e,i,o)}([s()],n.prototype,"select",void 0);export{n as wf_action_menu};