import{r as t,h as n,g as i}from"./p-5f633ccc.js";import"./p-74149bb1.js";import{d as e}from"./p-e9056a7d.js";import{o as r}from"./p-17dc0833.js";var o=function(){if("undefined"!=typeof Map)return Map;function t(t,n){var i=-1;return t.some((function(t,e){return t[0]===n&&(i=e,!0)})),i}return(function(){function n(){this.__entries__=[]}return Object.defineProperty(n.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),n.prototype.get=function(n){var i=t(this.__entries__,n),e=this.__entries__[i];return e&&e[1]},n.prototype.set=function(n,i){var e=t(this.__entries__,n);~e?this.__entries__[e][1]=i:this.__entries__.push([n,i])},n.prototype.delete=function(n){var i=this.__entries__,e=t(i,n);~e&&i.splice(e,1)},n.prototype.has=function(n){return!!~t(this.__entries__,n)},n.prototype.clear=function(){this.__entries__.splice(0)},n.prototype.forEach=function(t,n){void 0===n&&(n=null);for(var i=0,e=this.__entries__;i<e.length;i++){var r=e[i];t.call(n,r[1],r[0])}},n}())}(),s="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,h="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),u="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(h):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)},f=["top","right","bottom","left","width","height","size","weight"],c="undefined"!=typeof MutationObserver,a=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t){var n=!1,i=!1,e=0;function r(){n&&(n=!1,t()),i&&s()}function o(){u(r)}function s(){var t=Date.now();if(n){if(t-e<2)return;i=!0}else n=!0,i=!1,setTimeout(o,20);e=t}return s}(this.refresh.bind(this))}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var n=this.observers_,i=n.indexOf(t);~i&&n.splice(i,1),!n.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){s&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),c?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){s&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var n=t.propertyName,i=void 0===n?"":n;f.some((function(t){return!!~i.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),d=function(t,n){for(var i=0,e=Object.keys(n);i<e.length;i++){var r=e[i];Object.defineProperty(t,r,{value:n[r],enumerable:!1,writable:!1,configurable:!0})}return t},l=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||h},p=y(0,0,0,0);function v(t){return parseFloat(t)||0}function w(t){for(var n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];return n.reduce((function(n,i){return n+v(t["border-"+i+"-width"])}),0)}var b="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof l(t).SVGGraphicsElement}:function(t){return t instanceof l(t).SVGElement&&"function"==typeof t.getBBox};function m(t){return s?b(t)?function(t){var n=t.getBBox();return y(0,0,n.width,n.height)}(t):function(t){var n=t.clientWidth,i=t.clientHeight;if(!n&&!i)return p;var e=l(t).getComputedStyle(t),r=function(t){for(var n={},i=0,e=["top","right","bottom","left"];i<e.length;i++){var r=e[i];n[r]=v(t["padding-"+r])}return n}(e),o=r.left+r.right,s=r.top+r.bottom,h=v(e.width),u=v(e.height);if("border-box"===e.boxSizing&&(Math.round(h+o)!==n&&(h-=w(e,"left","right")+o),Math.round(u+s)!==i&&(u-=w(e,"top","bottom")+s)),!function(t){return t===l(t).document.documentElement}(t)){var f=Math.round(h+o)-n,c=Math.round(u+s)-i;1!==Math.abs(f)&&(h-=f),1!==Math.abs(c)&&(u-=c)}return y(r.left,r.top,h,u)}(t):p}function y(t,n,i,e){return{x:t,y:n,width:i,height:e}}var g=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=y(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=m(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),M=function(t,n){var i,e,r,o,s,h,u,f=(e=(i=n).x,r=i.y,o=i.width,s=i.height,h="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,u=Object.create(h.prototype),d(u,{x:e,y:r,width:o,height:s,top:r,right:e+o,bottom:s+r,left:e}),u);d(this,{target:t,contentRect:f})},O=function(){function t(t,n,i){if(this.activeObservations_=[],this.observations_=new o,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=n,this.callbackCtx_=i}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof l(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(t)||(n.set(t,new g(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof l(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(t)&&(n.delete(t),n.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(n){n.isActive()&&t.activeObservations_.push(n)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,n=this.activeObservations_.map((function(t){return new M(t.target,t.broadcastRect())}));this.callback_.call(t,n,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),j="undefined"!=typeof WeakMap?new WeakMap:new o,E=function t(n){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var i=a.getInstance(),e=new O(n,i,this);j.set(this,e)};["observe","unobserve","disconnect"].forEach((function(t){E.prototype[t]=function(){var n;return(n=j.get(this))[t].apply(n,arguments)}}));var T=void 0!==h.ResizeObserver?h.ResizeObserver:E;const D=class{constructor(n){t(this,n),this.type="vertical",this.parentAttr="*[wf-scroll-parent], *[brml-scroll-parent]",this.contentHeight="auto",this.setContentHeight=e(t=>{const{staticHeight:n}=this;if(n)return;const i=this.getAvailableHeight(t),e=this.host.querySelector(".scroll-element").getBoundingClientRect().height;i<=0&&(this.contentHeight=`${e+i}px`)},200)}addIntersectionObserver(t,n){r(t,t=>{!0===t[0].isIntersecting&&this.setContentHeight(n)},{threshold:[0]})}addResizeObserver(t){((t,n)=>{new T(n).observe(t)})(t,()=>{this.contentHeight="auto",this.setContentHeight(t)})}addMutationObserver(t){((t,n)=>{new MutationObserver(n).observe(t,{childList:!0})})(t,()=>{this.contentHeight="auto",this.setContentHeight(t)})}getDirectChildrenHeight(t){let n=0;const i=t.children,e=t.childNodes;e.length!==i.length&&e.forEach(t=>{if("#text"===t.nodeName){const i=document.createRange();i.selectNodeContents(t);const e=i.getBoundingClientRect();n+=e.height}});let r=[];return r=Array.from(i),n+=r.reduce((t,n)=>t+n.getBoundingClientRect().height,0),n}getParentByAttr(t,n){return t.closest(n)||t.parentElement}getAvailableHeight(t){const n=window.getComputedStyle(t),i=parseInt(n.paddingTop)+parseInt(n.paddingBottom),e=this.getDirectChildrenHeight(t);return t.getBoundingClientRect().height-i-e}componentDidLoad(){const{parentAttr:t,host:n,type:i}=this;if("horizontal"!==i){const i=this.getParentByAttr(n,t);this.addIntersectionObserver(n,i),this.addMutationObserver(i),this.addResizeObserver(i)}}render(){const{type:t,contentHeight:i,staticHeight:e}=this,r={width:"100%","overflow-x":"auto"},o={height:e||i,"min-height":"50px","overflow-y":"auto"},s="horizontal"===t?r:o,h="both"===t?Object.assign(Object.assign({},r),o):s;return n("div",{class:"scroll-element",style:Object.assign({},h)},n("slot",null))}get host(){return i(this)}};export{D as wf_scrollbar};